### STC32G 脱机配对说明及软件更新日志

- 可变波特率发生器

    | UARTX | TIMER        |
    | ----- | ------------ |
    | UART1 | time1、time2 |
    | UART2 | time2        |
    | UART3 | time2、time3 |
    | UART4 | time2、time4 |

    ```text
    由上述表格，串口都可以使用的波特率发生器为定时器2，也就是说四路串口可以共同使用一个定时器作为波特率发生器，但是值得注意的是，如果存在多路串口共用一个定时器，则他们的波特率是相同的;
    ```

    

- 串口引脚映射
	
	| UART1 | S1_S[1:0] |  Rx  |  Tx  |
	| :---: | :-------: | :--: | :--: |
	|       |    00     | P3.0 | P3.1 |
	|       |    01     | P3.6 | P3.7 |
	|       |    10     | P1.6 | P1.7 |
	|       |    11     | P4.3 | P4.4 |
	
	| UART2 | S2_S |  Rx  |  Tx  |
	| :---: | :--: | :--: | :--: |
	|       |  0   | P1.0 | P1.1 |
	|       |  1   | P4.6 | P4.7 |

  | UART3 | S3_S |  Rx  |  Tx  |
  | :---: | :--: | :--: | :--: |
  |       |  0   | P0.0 | P0.1 |
  |       |  1   | P5.0 | P5.1 |
  
  | UART4 | S4_S |  Rx  |  Tx  |
  | :---: | :--: | :--: | :--: |
  |       |  0   | P0.2 | P0.3 |
  |       |  1   | P5.2 | P5.3 |

==串口2引脚映射到P46、P47，并且LAP配对时必须连接到dgongle；==
==串口3引脚映射到P50、P51，LAP配对时连接到L/R==
；==串口4引脚映射到P52、P53，LAP配对时连接到L/R；==

### 更新日志
--------------------------------------------------------

#### 2022/07/26
- `STC32G`串口1格式化输出、`log`打印(`debug、error、warning`等信息打印)基本功能完成，UART部分参数检查基本功能完成

#### 2022/07/27
- 初步验证串口收发,暂时没发现问题
- 编写串口循环缓冲队列算法程序进行收发

#### 2022/07/28
1. `STC32G`完善循环队列收发算法，已经基本完善
2. 完成波特率匹配,完成STC32G和WQ7033波特率匹配和建立通信

#### 2022/07/29 - 2022/07/30
1. 使用逻辑分析仪完成对`CLI`指令的解析
2. 完成`STC32G`发送`CLI`程序编写

#### 2022/08/01 - 2022/08/02
1. 编写`STC32G`数据接收部分程序,完成接收数据`CRC`校验部分,验证有点BUG,待进一步完善

#### 2022/08/03
1. [x] 编写STC32G数据接收部分消息参数的获取相关代码
2. [x] 编写STC32G向WQ7033发送退出休眠和获取本机地址自发进行的相关代码

#### 2022/08/04
1. 编写STC32G地址交叉写入WQ7033相关代码,已完成

#### 2022/08/05
1. 完成`STC32G`定时器驱动代码编写
2. 发送数据和接收数据加入超时处理

#### 2022/08/16
1. 完善串口收发机制,解决程序在进行一段时间的收发数据后卡死问题

#### 2022/08/19 - 2022/08/20
1. 添加虚拟端口映射接口,通过虚拟端口映射可以方便地对指定`IO`口电平读取和写入
2. 编写LED状态指示和KEY检测代码,LED灯状态支持`on`、`off`、`blink`、`dim`四种状态,按键检测支持长按和短按